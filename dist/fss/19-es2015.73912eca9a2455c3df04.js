(window.webpackJsonp=window.webpackJsonp||[]).push([[19],{QSqd:function(t,e,n){"use strict";n.r(e),n.d(e,"ImportAtletComponentModule",(function(){return v}));var o=n("ofXK"),r=n("tyNb"),i=n("PSD3"),c=n.n(i);class a{}var l=n("fXoL"),s=n("LYy9"),b=n("3Pt+");const d=["csvReader"];function g(t,e){1&t&&l.Ub(0,"i",31)}function u(t,e){if(1&t&&(l.Yb(0,"b",28),l.Yb(1,"span",29),l.wc(2),l.Xb(),l.uc(3,g,1,0,"i",30),l.Xb()),2&t){const t=e.index,n=e.$implicit,o=l.ic(2);l.Hb(2),l.yc(" ",n.name," "),l.Hb(1),l.lc("ngIf",t+1!==o.group.length)}}const p=function(){return{standalone:!0}};function m(t,e){if(1&t){const t=l.Zb();l.Yb(0,"tr"),l.Yb(1,"th"),l.Yb(2,"i",32),l.gc("click",(function(){l.rc(t);const n=e.index;return l.ic(2).deleteForm(n)})),l.Xb(),l.Xb(),l.Yb(3,"th"),l.wc(4),l.Xb(),l.Yb(5,"td"),l.Yb(6,"div",33),l.Yb(7,"input",34),l.gc("ngModelChange",(function(n){return l.rc(t),e.$implicit.name=n})),l.Xb(),l.Xb(),l.Xb(),l.Yb(8,"td"),l.Yb(9,"div",33),l.Yb(10,"input",35),l.gc("ngModelChange",(function(n){return l.rc(t),e.$implicit.kontingen=n})),l.Xb(),l.Xb(),l.Xb(),l.Yb(11,"td"),l.Yb(12,"div",33),l.Yb(13,"input",36),l.gc("ngModelChange",(function(n){return l.rc(t),e.$implicit.kata=n})),l.Xb(),l.Xb(),l.Xb(),l.Yb(14,"td"),l.Yb(15,"input",37),l.gc("ngModelChange",(function(n){return l.rc(t),e.$implicit.group=n})),l.Xb(),l.Xb(),l.Yb(16,"td"),l.Yb(17,"div",33),l.Yb(18,"select",38),l.gc("ngModelChange",(function(n){return l.rc(t),e.$implicit.attribute=n})),l.Yb(19,"option",39),l.wc(20,"AKA "),l.Xb(),l.Yb(21,"option",40),l.wc(22,"AO "),l.Xb(),l.Xb(),l.Xb(),l.Xb(),l.Yb(23,"td"),l.Yb(24,"input",41),l.gc("ngModelChange",(function(n){return l.rc(t),e.$implicit.class=n})),l.Xb(),l.Xb(),l.Xb()}if(2&t){const t=e.index,n=e.$implicit;l.Hb(4),l.yc(" ",t+1," "),l.Hb(3),l.lc("ngModel",n.name)("ngModelOptions",l.nc(13,p)),l.Hb(3),l.lc("ngModel",n.kontingen)("ngModelOptions",l.nc(14,p)),l.Hb(3),l.lc("ngModel",n.kata)("ngModelOptions",l.nc(15,p)),l.Hb(2),l.lc("ngModel",n.group)("ngModelOptions",l.nc(16,p)),l.Hb(3),l.lc("ngModel",n.attribute)("ngModelOptions",l.nc(17,p)),l.Hb(6),l.lc("ngModel",n.class)("ngModelOptions",l.nc(18,p))}}function h(t,e){if(1&t){const t=l.Zb();l.Yb(0,"div",13),l.Yb(1,"div",18),l.Yb(2,"h1",19),l.wc(3," IMPOR DATA ATLET "),l.Xb(),l.Yb(4,"div",20),l.uc(5,u,4,2,"b",21),l.Xb(),l.Xb(),l.Yb(6,"div",14),l.Yb(7,"div",22),l.Yb(8,"table",23),l.Yb(9,"thead"),l.Yb(10,"tr"),l.Yb(11,"th"),l.wc(12," pilih "),l.Xb(),l.Yb(13,"th"),l.wc(14,"No"),l.Xb(),l.Yb(15,"th"),l.wc(16,"Nama Atlet"),l.Xb(),l.Yb(17,"th"),l.wc(18,"Kontingen"),l.Xb(),l.Yb(19,"th"),l.wc(20,"Kata"),l.Xb(),l.Yb(21,"th"),l.wc(22,"Grup"),l.Xb(),l.Yb(23,"th"),l.wc(24,"Atribut"),l.Xb(),l.Yb(25,"th"),l.wc(26,"Kelas"),l.Xb(),l.Xb(),l.Xb(),l.Yb(27,"tbody"),l.uc(28,m,25,19,"tr",24),l.Xb(),l.Xb(),l.Xb(),l.Yb(29,"div",25),l.Yb(30,"button",26),l.gc("click",(function(){return l.rc(t),l.ic().setForm()})),l.wc(31," Tambah Form "),l.Xb(),l.Yb(32,"button",27),l.gc("click",(function(){return l.rc(t),l.ic().submitForm()})),l.wc(33," Simpan Data "),l.Xb(),l.Xb(),l.Xb(),l.Xb()}if(2&t){const t=l.ic();l.Hb(5),l.lc("ngForOf",t.group),l.Hb(23),l.lc("ngForOf",t.names)}}const f=c.a.mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:2e3}),X=r.f.forChild([{path:"",component:(()=>{class t{constructor(t,e){this.atletService=t,this.routes=e,this.names=[],this.isProcess=!1,this.group=[],this.maxUserGroup=10,this.records=[]}ngOnInit(){}uploadListener(t){if(this.isValidCSVFile(t.srcElement.files[0])){let e=t.target,n=new FileReader;n.readAsText(e.files[0]),n.onload=()=>{let t=n.result.split(/\r\n|\n/),e=this.getHeaderArray(t);this.records=this.getDataRecordsArrayFromCSVFile(t,e.length)},n.onerror=function(){console.log("error is occured while reading file!")}}else alert("Please import valid .csv file."),this.fileReset()}getDataRecordsArrayFromCSVFile(t,e){let n,o=t.length-2,r=Math.ceil(o/this.maxUserGroup);for(console.log(`before ${t.length}, after ${o}`),n=1;n<=r;n++)this.group.push({name:"group "+(n+9).toString(36)});for(n=1;n<=t.length;n++){let o=t[n].split(",");if(o.length==e){let t=new a;t.name=o[0].trim(),t.kontingen=o[1].trim(),t.attribute=o[2].trim(),t.kata=o[3].trim(),t.group=o[4].trim(),t.class=o[5].trim(),this.names.push({name:t.name,kontingen:t.kontingen,kata:t.kata,attribute:t.attribute,selected:!1,group:"group "+t.group.toLowerCase(),class:t.class})}}return console.log(this.names),[]}isValidCSVFile(t){return t.name.endsWith(".csv")}getHeaderArray(t){let e=t[0].split(","),n=[];for(let o=0;o<e.length;o++)n.push(e[o]);return n}fileReset(){this.csvReader.nativeElement.value="",this.records=[]}addForm(){this.isProcess=!0,setTimeout(()=>{let t;for(t=1;t<=this.totalForm;t++)this.names.push({name:"",kontingen:"",kata:"",attribute:"",group:"null",class:""});this.isProcess=!1},500)}setForm(){this.names.push({name:"",kontingen:"",kata:"",attribute:"",group:"null",class:""})}deleteForm(t){this.names.splice(t,1)}numberOnly(t){const e=t.which?t.which:t.keyCode;return!(e>31&&(e<48||e>57))}submitForm(){this.atletService.addAtletGroup(this.names,this.group).then(t=>{console.log(t),f.fire({icon:"success",title:"Data Atlet berhasil di tambah"}),this.routes.navigate(["file-atlet"])}).catch(t=>{f.fire({icon:"error",title:"Kesalahan pada server"}),console.log(t)})}}return t.\u0275fac=function(e){return new(e||t)(l.Tb(s.a),l.Tb(r.b))},t.\u0275cmp=l.Nb({type:t,selectors:[["app-import-atlet"]],viewQuery:function(t,e){var n;1&t&&l.Ac(d,!0),2&t&&l.pc(n=l.hc())&&(e.csvReader=n.first)},decls:26,vars:1,consts:[[1,"header","pb-6",2,"background","url('assets/images/banner/banner6.jpg')","height","200px"],[1,"container-fluid"],[1,"header-body"],[1,"row","align-items-center","py-4"],[1,"text-center","text-light","mt-3",2,"margin","auto","font-size","40px"],[1,"row",2,"margin-top","-100px"],[1,"col"],[1,"col-lg-11","col-md-11"],[1,"row"],[1,"col-md-12"],["routerLink","/file-atlet",1,"btn","btn-sm","btn-neutral","mb-4"],[1,"fa","fa-angle-left"],[1,"float-right","badge","badge-success"],[1,"card"],[1,"card-body"],["type","file","name","Upload CSV","id","txtFileUpload","accept",".csv",1,"btn","btn-block","btn-outline-success",3,"change"],["csvReader",""],["class","card",4,"ngIf"],[1,"card-header","bg-primary"],[1,"text-uppercase","text-center","text-white"],[1,"position-absolute"],["class","text-uppercase my-1",4,"ngFor","ngForOf"],[1,"table-responsive"],[1,"table","table-borderless"],[4,"ngFor","ngForOf"],[1,"card-footer"],[1,"btn","btn-outline-primary",3,"click"],[1,"btn","float-right","btn-outline-success",3,"click"],[1,"text-uppercase","my-1"],[1,"badge","badge-primary"],["class","fa fa-caret-right mx-2 text-success",4,"ngIf"],[1,"fa","fa-caret-right","mx-2","text-success"],[1,"fa","fa-trash","text-danger",3,"click"],[1,"form-group"],["placeholder","Nama Atlet","type","text",1,"form-control","form-control-sm",3,"ngModel","ngModelOptions","ngModelChange"],["placeholder","Kontingen","type","text",1,"form-control","form-control-sm",3,"ngModel","ngModelOptions","ngModelChange"],["type","text","placeholder","Kata",1,"form-control","form-control-sm",3,"ngModel","ngModelOptions","ngModelChange"],["placeholder","group","type","text",1,"form-control","form-control-sm",3,"ngModel","ngModelOptions","ngModelChange"],["placeholder","Nama Atlet",1,"form-control","form-control-sm",3,"ngModel","ngModelOptions","ngModelChange"],["value","aka",2,"background-color","red","color","#fff"],["value","ao",2,"background-color","blue","color","#fff"],["type","text",1,"form-control","form-control-sm",3,"ngModel","ngModelOptions","ngModelChange"]],template:function(t,e){1&t&&(l.Yb(0,"div",0),l.Yb(1,"div",1),l.Yb(2,"div",2),l.Yb(3,"div",3),l.Yb(4,"p",4),l.wc(5,"Import Data Atlet"),l.Xb(),l.Xb(),l.Xb(),l.Xb(),l.Xb(),l.Yb(6,"div",5),l.Ub(7,"div",6),l.Yb(8,"div",7),l.Yb(9,"div",8),l.Yb(10,"div",9),l.Yb(11,"a",10),l.Ub(12,"i",11),l.wc(13," Back"),l.Xb(),l.Yb(14,"span",12),l.wc(15,"import .csv"),l.Xb(),l.Yb(16,"div",13),l.Yb(17,"div",14),l.Yb(18,"div",8),l.Yb(19,"div",9),l.Yb(20,"input",15,16),l.gc("change",(function(t){return e.uploadListener(t)})),l.Xb(),l.Xb(),l.Xb(),l.Xb(),l.Xb(),l.Xb(),l.Xb(),l.Yb(22,"div",8),l.Yb(23,"div",9),l.uc(24,h,34,2,"div",17),l.Xb(),l.Xb(),l.Xb(),l.Ub(25,"div",6),l.Xb()),2&t&&(l.Hb(24),l.lc("ngIf",e.names.length))},directives:[r.e,o.j,o.i,b.b,b.e,b.h,b.k,b.i,b.l],styles:[""]}),t})()}]);var Y=n("tk/3");let v=(()=>{class t{}return t.\u0275mod=l.Rb({type:t}),t.\u0275inj=l.Qb({factory:function(e){return new(e||t)},imports:[[X,o.b,Y.b,b.c,b.j]]}),t})()}}]);