function _toConsumableArray(t){return _arrayWithoutHoles(t)||_iterableToArray(t)||_unsupportedIterableToArray(t)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(t,e){if(t){if("string"==typeof t)return _arrayLikeToArray(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);return"Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?_arrayLikeToArray(t,e):void 0}}function _iterableToArray(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}function _arrayWithoutHoles(t){if(Array.isArray(t))return _arrayLikeToArray(t)}function _arrayLikeToArray(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,o=new Array(e);i<e;i++)o[i]=t[i];return o}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var i=0;i<e.length;i++){var o=e[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function _createClass(t,e,i){return e&&_defineProperties(t.prototype,e),i&&_defineProperties(t,i),t}(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{w4Pu:function(t,e,i){"use strict";i.r(e),i.d(e,"AssessmentAdminComponentModule",(function(){return _}));var o=i("ofXK"),n=i("tyNb"),a=i("PSD3"),r=i.n(a),s=i("fXoL"),l=i("7JkF"),c=i("LYy9"),u=i("PLSI"),b=i("3Pt+");function d(t,e){if(1&t&&(s.Yb(0,"div",7),s.Ub(1,"div",8),s.Yb(2,"div",9),s.Yb(3,"div",10),s.Yb(4,"div",11),s.Yb(5,"div",12),s.Yb(6,"div",13),s.Yb(7,"div",10),s.Yb(8,"div",11),s.Yb(9,"div",14),s.Yb(10,"label"),s.vc(11,"Nama Atlet "),s.Xb(),s.Yb(12,"h1"),s.vc(13),s.Xb(),s.Xb(),s.Xb(),s.Xb(),s.Ub(14,"hr"),s.Yb(15,"div",10),s.Yb(16,"div",15),s.Yb(17,"div",14),s.Yb(18,"label"),s.vc(19,"Memainkan kata "),s.Xb(),s.Yb(20,"h2"),s.vc(21),s.Xb(),s.Xb(),s.Xb(),s.Yb(22,"div",15),s.Yb(23,"div",14),s.Yb(24,"label"),s.vc(25,"Kontingen "),s.Xb(),s.Yb(26,"h2"),s.vc(27),s.Xb(),s.Xb(),s.Xb(),s.Xb(),s.Xb(),s.Xb(),s.Xb(),s.Xb(),s.Xb(),s.Ub(28,"div",8),s.Xb()),2&t){var i=s.ic();s.Hb(13),s.xc(" ",i.userData.atlet_name,""),s.Hb(8),s.xc(" ",i.userData.kata_name,""),s.Hb(6),s.wc(i.userData.kontingen)}}function p(t,e){if(1&t&&(s.Yb(0,"option"),s.vc(1),s.Xb()),2&t){var i=e.$implicit,o=s.ic().index,n=s.ic(2);s.Ib("selected",!(o+1!=n.optionValue[o].userId||!i.selectedTechnical)||null),s.Hb(1),s.xc("",i.point," ")}}function f(t,e){if(1&t&&(s.Yb(0,"option"),s.vc(1),s.Xb()),2&t){var i=e.$implicit,o=s.ic().index,n=s.ic(2);s.Ib("selected",!(o+1!==n.optionValue[o].userId||!i.selectedAthletic)||null),s.Hb(1),s.xc("",i.point," ")}}function h(t,e){if(1&t&&(s.Yb(0,"tr"),s.Yb(1,"th"),s.vc(2),s.Xb(),s.Yb(3,"th"),s.vc(4),s.Xb(),s.Yb(5,"td"),s.Yb(6,"div",23),s.Yb(7,"select",24),s.Yb(8,"option"),s.vc(9,"0"),s.Xb(),s.tc(10,p,2,2,"option",18),s.Xb(),s.Xb(),s.Xb(),s.Yb(11,"td"),s.Yb(12,"div",23),s.Yb(13,"select",24),s.Yb(14,"option"),s.vc(15,"0"),s.Xb(),s.tc(16,f,2,2,"option",18),s.Xb(),s.Xb(),s.Xb(),s.Xb()),2&t){var i=e.index,o=e.$implicit,n=s.ic(2);s.Hb(2),s.wc(i+1),s.Hb(2),s.wc(o.juri),s.Hb(6),s.lc("ngForOf",n.optionValue[i].data),s.Hb(6),s.lc("ngForOf",n.optionValue[i].data)}}function v(t,e){if(1&t){var i=s.Zb();s.Yb(0,"div",10),s.Ub(1,"div",8),s.Yb(2,"div",9),s.Yb(3,"div",10),s.Yb(4,"div",11),s.Yb(5,"div",12),s.Yb(6,"div",13),s.Yb(7,"div",16),s.Yb(8,"table",17),s.Yb(9,"thead"),s.Yb(10,"tr"),s.Yb(11,"th"),s.vc(12,"No"),s.Xb(),s.Yb(13,"th"),s.vc(14,"Juri"),s.Xb(),s.Yb(15,"th"),s.vc(16,"Nilai Teknik"),s.Xb(),s.Yb(17,"th"),s.vc(18,"Nilai Atletik"),s.Xb(),s.Xb(),s.Xb(),s.Yb(19,"tbody"),s.tc(20,h,17,4,"tr",18),s.Xb(),s.Xb(),s.Xb(),s.Yb(21,"div",11),s.Ub(22,"hr"),s.Yb(23,"button",19),s.Ub(24,"i",20),s.vc(25," Simpan "),s.Xb(),s.Yb(26,"button",21),s.gc("click",(function(){return s.qc(i),s.ic().athleteReset()})),s.Ub(27,"i",22),s.vc(28," Reset "),s.Xb(),s.Xb(),s.Xb(),s.Xb(),s.Xb(),s.Xb(),s.Xb(),s.Ub(29,"div",8),s.Xb()}if(2&t){var o=s.ic();s.Hb(20),s.lc("ngForOf",o.Data)}}var m,g,X=r.a.mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:2e3}),Y=n.f.forChild([{path:"",component:(m=function(){function t(e,i,o){var n=this;_classCallCheck(this,t),this.socket=e,this.atletService=i,this.pointService=o,this.isLoading=!1,this.userData={},this.optionValue=[],this.originalOptionValue=[],this.userPoint=[],this.cmpUserPoint=[],this.isFound=!1,this.Data=[{juri:"J-1"},{juri:"J-2"},{juri:"J-3"},{juri:"J-4"},{juri:"J-5"},{juri:"J-6"},{juri:"J-7"}],this.socket.emit("result-admin"),this.socket.on("data-admin",(function(){n.atletService.getAtletByMatch().then((function(t){n.userData=t.result[0],n.pointService.getPointForScoreboard(n.userData.id_atlet,n.userData.id_match).then((function(t){if(n.userPoint=t.result.athlete_point_list||t.result||[],n.cmpUserPoint=_toConsumableArray(n.userPoint),n.userPoint.length<1)for(var e=0;e<7;e++){n.optionValue.push({userId:e+1,data:[]});for(var i=5;i<10;i+=.2){var o=i.toFixed(1);n.optionValue[e].data.push({point:o})}}else{for(var a=0;a<7;a++){for(var r in n.isFound=!1,n.userPoint)n.userPoint[r].id_user-1===a&&(n.isFound=!0,n.optionValue.push({userId:n.userPoint[r].id_user,data:[],isFound:!0}));n.isFound||n.optionValue.push({userId:10*(a+1),data:[]});for(var s=5;s<10;s+=.2){var l=s.toFixed(1);n.optionValue[a].data.push({point:l})}}for(var c in n.optionValue)if(n.userPoint[c])for(var u in n.optionValue[c].data){var b=n.optionValue[c].data[u];n.userPoint[c].technical_result.toFixed(1)===b.point&&(n.optionValue[n.userPoint[c].id_user-1].data[u].selectedTechnical=!0,n.userPoint[c].athletic_result.toFixed(1)===b.point&&(n.optionValue[n.userPoint[c].id_user-1].data[u].selectedAthletic=!0)),n.userPoint[c].athletic_result.toFixed(1)===b.point&&(n.optionValue[n.userPoint[c].id_user-1].data[u].selectedAthletic=!0,n.userPoint[c].technical_result.toFixed(1)===b.point&&(n.optionValue[n.userPoint[c].id_user-1].data[u].selectedTechnical=!0))}}n.isLoading=!1})).catch((function(t){if(console.log(t),404===t.status)for(var e=5;e<10;e+=.2){var i=e.toFixed(1);n.optionValue.push({point:i,selected:!1})}n.isLoading=!1}))})).catch((function(t){if(404===t.status){console.log("notFound");for(var e=0;e<7;e++){n.optionValue.push({userId:e+1,data:[]});for(var i=5;i<10;i+=.2){var o=i.toFixed(1);n.optionValue[e].data.push({point:o})}}}console.log(t),n.isLoading=!1}))}))}return _createClass(t,[{key:"ngOnInit",value:function(){console.log(this.optionValue),this.isLoading=!0}},{key:"onSubmit",value:function(){this.socket.emit("scoreboard"),this.socket.emit("result-admin"),this.socket.emit("result-juri")}},{key:"athleteReset",value:function(){var t=this;if(console.log("masuk",this.userData),this.userData){var e=1;for(var i in this.optionValue)for(var o in this.optionValue[i].data)this.optionValue[i].data[o].selectedTechnical&&e++;7===e?this.pointService.changeAthleteAssessment(this.userData.id_atlet).then((function(t){console.log(t)})).catch((function(e){if(console.log(e),404===e.status){t.isLoading=!0,console.log("masuk gag"),t.optionValue=[],t.userData={};for(var i=0;i<7;i++){t.optionValue.push({userId:i+1,data:[]});for(var o=5;o<10;o+=.2){var n=o.toFixed(1);t.optionValue[i].data.push({point:n})}}}t.isLoading=!1,console.log(t.optionValue)})):X.fire({icon:"info",text:"Mohon lengkapi penilaian atlet terlebih dahulu"})}else X.fire({icon:"info",text:"Mohon lengkapi penilaian atlet terlebih dahulu"})}}]),t}(),m.\u0275fac=function(t){return new(t||m)(s.Tb(l.a),s.Tb(c.a),s.Tb(u.a))},m.\u0275cmp=s.Nb({type:m,selectors:[["app-assessment-admin"]],decls:8,vars:2,consts:[[1,"header","pb-6",2,"background","url('assets/images/banner/banner6.jpg')","height","200px"],[1,"container-fluid"],[1,"header-body"],[1,"row","align-items-center","py-4"],[1,"text-center","text-light","mt-3",2,"margin","auto","font-size","40px"],["class","row","style","margin-top: -80px;",4,"ngIf"],["class","row",4,"ngIf"],[1,"row",2,"margin-top","-80px"],[1,"col"],[1,"col-lg-8","col-md-10"],[1,"row"],[1,"col-md-12"],[1,"card"],[1,"card-body"],[1,"text-center"],[1,"col-md-6"],[1,"table-responsive"],[1,"table","table-borderless"],[4,"ngFor","ngForOf"],[1,"btn","btn-outline-success","float-right"],[1,"fa","fa-save"],[1,"btn","btn-danger",3,"click"],[1,"fa","fa-eraser"],[1,"form-group"],[1,"form-control"]],template:function(t,e){1&t&&(s.Yb(0,"div",0),s.Yb(1,"div",1),s.Yb(2,"div",2),s.Yb(3,"div",3),s.Yb(4,"p",4),s.vc(5,"Penilaian Admin"),s.Xb(),s.Xb(),s.Xb(),s.Xb(),s.Xb(),s.tc(6,d,29,3,"div",5),s.tc(7,v,30,1,"div",6)),2&t&&(s.Hb(6),s.lc("ngIf",!e.isLoading),s.Hb(1),s.lc("ngIf",!e.isLoading))},directives:[o.j,o.i,b.i,b.l],styles:[""]}),m)}]),y=i("tk/3"),_=((g=function t(){_classCallCheck(this,t)}).\u0275mod=s.Rb({type:g}),g.\u0275inj=s.Qb({factory:function(t){return new(t||g)},imports:[[Y,o.b,y.b,b.c,b.j]]}),g)}}]);