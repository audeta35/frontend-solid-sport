function _toConsumableArray(t){return _arrayWithoutHoles(t)||_iterableToArray(t)||_unsupportedIterableToArray(t)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(t,e){if(t){if("string"==typeof t)return _arrayLikeToArray(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);return"Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?_arrayLikeToArray(t,e):void 0}}function _iterableToArray(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}function _arrayWithoutHoles(t){if(Array.isArray(t))return _arrayLikeToArray(t)}function _arrayLikeToArray(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,o=new Array(e);i<e;i++)o[i]=t[i];return o}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var i=0;i<e.length;i++){var o=e[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function _createClass(t,e,i){return e&&_defineProperties(t.prototype,e),i&&_defineProperties(t,i),t}(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{w4Pu:function(t,e,i){"use strict";i.r(e),i.d(e,"AssessmentAdminComponentModule",(function(){return P}));var o=i("ofXK"),a=i("tyNb"),n=i("PSD3"),r=i.n(n),s=i("fXoL"),l=i("7JkF"),c=i("LYy9"),u=i("PLSI"),d=i("3Pt+");function b(t,e){if(1&t&&(s.Yb(0,"div",7),s.Ub(1,"div",8),s.Yb(2,"div",9),s.Yb(3,"div",10),s.Yb(4,"div",11),s.Yb(5,"div",12),s.Yb(6,"div",13),s.Yb(7,"div",10),s.Yb(8,"div",11),s.Yb(9,"div",14),s.Yb(10,"label"),s.wc(11,"Nama Atlet "),s.Xb(),s.Yb(12,"h1"),s.wc(13),s.Xb(),s.Xb(),s.Xb(),s.Xb(),s.Ub(14,"hr"),s.Yb(15,"div",10),s.Yb(16,"div",15),s.Yb(17,"div",14),s.Yb(18,"label"),s.wc(19,"Memainkan kata "),s.Xb(),s.Yb(20,"h2"),s.wc(21),s.Xb(),s.Xb(),s.Xb(),s.Yb(22,"div",15),s.Yb(23,"div",14),s.Yb(24,"label"),s.wc(25,"Kontingen "),s.Xb(),s.Yb(26,"h2"),s.wc(27),s.Xb(),s.Xb(),s.Xb(),s.Xb(),s.Xb(),s.Xb(),s.Xb(),s.Xb(),s.Xb(),s.Ub(28,"div",8),s.Xb()),2&t){var i=s.ic();s.Hb(13),s.yc(" ",i.userData.atlet_name,""),s.Hb(8),s.yc(" ",i.userData.kata_name,""),s.Hb(6),s.xc(i.userData.kontingen)}}function p(t,e){if(1&t&&(s.Yb(0,"option"),s.wc(1),s.Xb()),2&t){var i=e.$implicit,o=s.ic().index,a=s.ic(2);s.Ib("selected",!(o+1!=a.optionValue[o].userId||!i.selectedTechnical)||null),s.Hb(1),s.yc("",i.point," ")}}function h(t,e){if(1&t&&(s.Yb(0,"option"),s.wc(1),s.Xb()),2&t){var i=e.$implicit,o=s.ic().index,a=s.ic(2);s.Ib("selected",!(o+1!==a.optionValue[o].userId||!i.selectedAthletic)||null),s.Hb(1),s.yc("",i.point," ")}}function f(t,e){if(1&t){var i=s.Zb();s.Yb(0,"tr"),s.Yb(1,"th"),s.wc(2),s.Xb(),s.Yb(3,"th"),s.wc(4),s.Xb(),s.Yb(5,"td"),s.Yb(6,"div",23),s.Yb(7,"select",24),s.gc("change",(function(t){s.rc(i);var o=e.index;return s.ic(2)._handleSelectPoint("tech",o,t.target.value)})),s.Yb(8,"option"),s.wc(9,"0"),s.Xb(),s.uc(10,p,2,2,"option",18),s.Xb(),s.Xb(),s.Xb(),s.Yb(11,"td"),s.Yb(12,"div",23),s.Yb(13,"select",24),s.gc("change",(function(t){s.rc(i);var o=e.index;return s.ic(2)._handleSelectPoint("ath",o,t.target.value)})),s.Yb(14,"option"),s.wc(15,"0"),s.Xb(),s.uc(16,h,2,2,"option",18),s.Xb(),s.Xb(),s.Xb(),s.Xb()}if(2&t){var o=e.index,a=e.$implicit,n=s.ic(2);s.Hb(2),s.xc(o+1),s.Hb(2),s.xc(a.juri),s.Hb(6),s.lc("ngForOf",n.optionValue[o].data),s.Hb(6),s.lc("ngForOf",n.optionValue[o].data)}}function v(t,e){if(1&t){var i=s.Zb();s.Yb(0,"div",10),s.Ub(1,"div",8),s.Yb(2,"div",9),s.Yb(3,"div",10),s.Yb(4,"div",11),s.Yb(5,"div",12),s.Yb(6,"div",13),s.Yb(7,"div",16),s.Yb(8,"table",17),s.Yb(9,"thead"),s.Yb(10,"tr"),s.Yb(11,"th"),s.wc(12,"No"),s.Xb(),s.Yb(13,"th"),s.wc(14,"Juri"),s.Xb(),s.Yb(15,"th"),s.wc(16,"Nilai Teknik"),s.Xb(),s.Yb(17,"th"),s.wc(18,"Nilai Atletik"),s.Xb(),s.Xb(),s.Xb(),s.Yb(19,"tbody"),s.uc(20,f,17,4,"tr",18),s.Xb(),s.Xb(),s.Xb(),s.Yb(21,"div",11),s.Ub(22,"hr"),s.Yb(23,"button",19),s.gc("click",(function(){return s.rc(i),s.ic().onSubmit()})),s.Ub(24,"i",20),s.wc(25," Simpan "),s.Xb(),s.Yb(26,"button",21),s.gc("click",(function(){return s.rc(i),s.ic().athleteReset()})),s.Ub(27,"i",22),s.wc(28," Reset "),s.Xb(),s.Xb(),s.Xb(),s.Xb(),s.Xb(),s.Xb(),s.Xb(),s.Ub(29,"div",8),s.Xb()}if(2&t){var o=s.ic();s.Hb(20),s.lc("ngForOf",o.Data)}}var m,g,y=r.a.mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:2e3}),X=a.f.forChild([{path:"",component:(m=function(){function t(e,i,o){var a=this;_classCallCheck(this,t),this.socket=e,this.atletService=i,this.pointService=o,this.isLoading=!1,this.userData={},this.optionValue=[],this.originalOptionValue=[],this.userPoint=[],this.cmpUserPoint=[],this.isFound=!1,this.Data=[{juri:"J-1"},{juri:"J-2"},{juri:"J-3"},{juri:"J-4"},{juri:"J-5"},{juri:"J-6"},{juri:"J-7"}],this.payload={matchId:0,athleteId:0,adminPointList:[]},this.socket.emit("result-admin"),this.socket.on("data-admin",(function(){a.atletService.getAtletByMatch().then((function(t){a.userData={},a.optionValue=[],a.originalOptionValue=[],a.userPoint=[],a.cmpUserPoint=[],a.userData=t.result[0],a.payload.matchId=a.userData.id_match,a.payload.athleteId=a.userData.id_atlet,a.pointService.getPointForScoreboard(a.userData.id_atlet,a.userData.id_match).then((function(t){if(a.userPoint=t.result.athlete_point_list||t.result||[],a.cmpUserPoint=_toConsumableArray(a.userPoint),a.userPoint.length<1)for(var e=0;e<7;e++){a.optionValue.push({userId:e+1,data:[]});for(var i=5;i<10;i+=.2){var o=i.toFixed(1);a.optionValue[e].data.push({point:o})}}else{for(var n=0;n<7;n++){for(var r in a.isFound=!1,a.userPoint)a.userPoint[r].id_user-1===n&&(a.isFound=!0,a.optionValue.push({userId:a.userPoint[r].id_user,data:[],isFound:!0}));a.isFound||a.optionValue.push({userId:10*(n+1),data:[]});for(var s=5;s<10;s+=.2){var l=s.toFixed(1);a.optionValue[n].data.push({point:l})}}for(var c in a.optionValue)if(a.userPoint[c])for(var u in a.optionValue[c].data){var d=a.optionValue[c].data[u];a.userPoint[c].technical_result.toFixed(1)===d.point&&(a.optionValue[a.userPoint[c].id_user-1].data[u].selectedTechnical=!0,a.payload.adminPointList[a.userPoint[c].id_user-1].techValue=d.point,a.userPoint[c].athletic_result.toFixed(1)===d.point&&(a.optionValue[a.userPoint[c].id_user-1].data[u].selectedAthletic=!0,a.payload.adminPointList[a.userPoint[c].id_user-1].athValue=d.point)),a.userPoint[c].athletic_result.toFixed(1)===d.point&&(a.optionValue[a.userPoint[c].id_user-1].data[u].selectedAthletic=!0,a.payload.adminPointList[a.userPoint[c].id_user-1].athValue=d.point,a.userPoint[c].technical_result.toFixed(1)===d.point&&(a.optionValue[a.userPoint[c].id_user-1].data[u].selectedTechnical=!0,a.payload.adminPointList[a.userPoint[c].id_user-1].techValue=d.point))}}console.log(a.optionValue),a.isLoading=!1})).catch((function(t){if(console.log(t),404===t.status)for(var e=0;e<7;e++){a.optionValue.push({userId:e+1,data:[]});for(var i=5;i<10;i+=.2){var o=i.toFixed(1);a.optionValue[e].data.push({point:o})}}a.isLoading=!1}))})).catch((function(t){if(404===t.status){console.log("notFound");for(var e=0;e<7;e++){a.optionValue.push({userId:e+1,data:[]});for(var i=5;i<10;i+=.2){var o=i.toFixed(1);a.optionValue[e].data.push({point:o})}}}console.log(t),a.isLoading=!1}))})),this.socket.on("reset-data-admin",(function(){console.log("realtime reset"),a.userData={},a.optionValue=[],a.originalOptionValue=[],a.userPoint=[],a.cmpUserPoint=[];for(var t=0;t<7;t++){a.optionValue.push({userId:t+1,data:[]});for(var e=5;e<10;e+=.2){var i=e.toFixed(1);a.optionValue[t].data.push({point:i})}}}))}return _createClass(t,[{key:"ngOnInit",value:function(){for(var t=1;t<8;t++)this.payload.adminPointList.push({userId:t,techValue:0,athValue:0});this.isLoading=!0}},{key:"_handleSelectPoint",value:function(t,e,i){"tech"===t?this.payload.adminPointList[e].techValue=i:this.payload.adminPointList[e].athValue=i}},{key:"onSubmit",value:function(){var t=this;console.log(this.payload),this.pointService.doPointByAdmin(this.payload).then((function(e){console.log(e),t.socket.emit("result-admin"),t.socket.emit("scoreboard")})).catch((function(t){console.log(t)}))}},{key:"athleteReset",value:function(){var t=this;if(this.userData){var e=0;for(var i in this.optionValue)for(var o in this.optionValue[i].data)this.optionValue[i].data[o].selectedTechnical&&e++;e>=5?this.pointService.changeAthleteAssessment(this.userData.id_atlet).then((function(e){console.log(e),t.socket.emit("reset-admin")})).catch((function(e){if(console.log(e),404===e.status){console.log("== masuk gag 404"),t.userData={},t.optionValue=[],t.originalOptionValue=[],t.socket.emit("reset-scoreboard"),t.socket.emit("reset-admin"),t.socket.emit("reset-juri"),t.userPoint=[],t.cmpUserPoint=[],t.isLoading=!0;for(var i=0;i<7;i++){t.optionValue.push({userId:i+1,data:[]});for(var o=5;o<10;o+=.2){var a=o.toFixed(1);t.optionValue[i].data.push({point:a})}}}t.isLoading=!1,console.log(t.optionValue)})):y.fire({icon:"info",text:"Mohon lengkapi penilaian atlet terlebih dahulu"})}else y.fire({icon:"info",text:"Mohon lengkapi penilaian atlet terlebih dahulu"})}}]),t}(),m.\u0275fac=function(t){return new(t||m)(s.Tb(l.a),s.Tb(c.a),s.Tb(u.a))},m.\u0275cmp=s.Nb({type:m,selectors:[["app-assessment-admin"]],decls:8,vars:2,consts:[[1,"header","pb-6",2,"background","url('assets/images/banner/banner6.jpg')","height","200px"],[1,"container-fluid"],[1,"header-body"],[1,"row","align-items-center","py-4"],[1,"text-center","text-light","mt-3",2,"margin","auto","font-size","40px"],["class","row","style","margin-top: -80px;",4,"ngIf"],["class","row",4,"ngIf"],[1,"row",2,"margin-top","-80px"],[1,"col"],[1,"col-lg-8","col-md-10"],[1,"row"],[1,"col-md-12"],[1,"card"],[1,"card-body"],[1,"text-center"],[1,"col-md-6"],[1,"table-responsive"],[1,"table","table-borderless"],[4,"ngFor","ngForOf"],[1,"btn","btn-outline-success","float-right",3,"click"],[1,"fa","fa-save"],[1,"btn","btn-danger",3,"click"],[1,"fa","fa-eraser"],[1,"form-group"],[1,"form-control",3,"change"]],template:function(t,e){1&t&&(s.Yb(0,"div",0),s.Yb(1,"div",1),s.Yb(2,"div",2),s.Yb(3,"div",3),s.Yb(4,"p",4),s.wc(5,"Penilaian Admin"),s.Xb(),s.Xb(),s.Xb(),s.Xb(),s.Xb(),s.uc(6,b,29,3,"div",5),s.uc(7,v,30,1,"div",6)),2&t&&(s.Hb(6),s.lc("ngIf",!e.isLoading),s.Hb(1),s.lc("ngIf",!e.isLoading))},directives:[o.j,o.i,d.i,d.l],styles:[""]}),m)}]),Y=i("tk/3"),P=((g=function t(){_classCallCheck(this,t)}).\u0275mod=s.Rb({type:g}),g.\u0275inj=s.Qb({factory:function(t){return new(t||g)},imports:[[X,o.b,Y.b,d.c,d.j]]}),g)}}]);