(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{w4Pu:function(t,i,e){"use strict";e.r(i),e.d(i,"AssessmentAdminComponentModule",(function(){return Y}));var o=e("ofXK"),s=e("tyNb"),n=e("PSD3"),a=e.n(n),l=e("fXoL"),c=e("7JkF"),h=e("LYy9"),r=e("PLSI"),u=e("3Pt+");function d(t,i){if(1&t&&(l.Yb(0,"div",7),l.Ub(1,"div",8),l.Yb(2,"div",9),l.Yb(3,"div",10),l.Yb(4,"div",11),l.Yb(5,"div",12),l.Yb(6,"div",13),l.Yb(7,"div",10),l.Yb(8,"div",11),l.Yb(9,"div",14),l.Yb(10,"label"),l.vc(11,"Nama Atlet "),l.Xb(),l.Yb(12,"h1"),l.vc(13),l.Xb(),l.Xb(),l.Xb(),l.Xb(),l.Ub(14,"hr"),l.Yb(15,"div",10),l.Yb(16,"div",15),l.Yb(17,"div",14),l.Yb(18,"label"),l.vc(19,"Memainkan kata "),l.Xb(),l.Yb(20,"h2"),l.vc(21),l.Xb(),l.Xb(),l.Xb(),l.Yb(22,"div",15),l.Yb(23,"div",14),l.Yb(24,"label"),l.vc(25,"Kontingen "),l.Xb(),l.Yb(26,"h2"),l.vc(27),l.Xb(),l.Xb(),l.Xb(),l.Xb(),l.Xb(),l.Xb(),l.Xb(),l.Xb(),l.Xb(),l.Ub(28,"div",8),l.Xb()),2&t){const t=l.ic();l.Hb(13),l.xc(" ",t.userData.atlet_name,""),l.Hb(8),l.xc(" ",t.userData.kata_name,""),l.Hb(6),l.wc(t.userData.kontingen)}}function b(t,i){if(1&t&&(l.Yb(0,"option"),l.vc(1),l.Xb()),2&t){const t=i.$implicit,e=l.ic().index,o=l.ic(2);l.Ib("selected",!(e+1!=o.optionValue[e].userId||!t.selectedTechnical)||null),l.Hb(1),l.xc("",t.point," ")}}function p(t,i){if(1&t&&(l.Yb(0,"option"),l.vc(1),l.Xb()),2&t){const t=i.$implicit,e=l.ic().index,o=l.ic(2);l.Ib("selected",!(e+1!==o.optionValue[e].userId||!t.selectedAthletic)||null),l.Hb(1),l.xc("",t.point," ")}}function f(t,i){if(1&t){const t=l.Zb();l.Yb(0,"tr"),l.Yb(1,"th"),l.vc(2),l.Xb(),l.Yb(3,"th"),l.vc(4),l.Xb(),l.Yb(5,"td"),l.Yb(6,"div",23),l.Yb(7,"select",24),l.gc("change",(function(e){l.qc(t);const o=i.index;return l.ic(2)._handleSelectPoint("tech",o,e.target.value)})),l.Yb(8,"option"),l.vc(9,"0"),l.Xb(),l.tc(10,b,2,2,"option",18),l.Xb(),l.Xb(),l.Xb(),l.Yb(11,"td"),l.Yb(12,"div",23),l.Yb(13,"select",24),l.gc("change",(function(e){l.qc(t);const o=i.index;return l.ic(2)._handleSelectPoint("ath",o,e.target.value)})),l.Yb(14,"option"),l.vc(15,"0"),l.Xb(),l.tc(16,p,2,2,"option",18),l.Xb(),l.Xb(),l.Xb(),l.Xb()}if(2&t){const t=i.index,e=i.$implicit,o=l.ic(2);l.Hb(2),l.wc(t+1),l.Hb(2),l.wc(e.juri),l.Hb(6),l.lc("ngForOf",o.optionValue[t].data),l.Hb(6),l.lc("ngForOf",o.optionValue[t].data)}}function m(t,i){if(1&t){const t=l.Zb();l.Yb(0,"div",10),l.Ub(1,"div",8),l.Yb(2,"div",9),l.Yb(3,"div",10),l.Yb(4,"div",11),l.Yb(5,"div",12),l.Yb(6,"div",13),l.Yb(7,"div",16),l.Yb(8,"table",17),l.Yb(9,"thead"),l.Yb(10,"tr"),l.Yb(11,"th"),l.vc(12,"No"),l.Xb(),l.Yb(13,"th"),l.vc(14,"Juri"),l.Xb(),l.Yb(15,"th"),l.vc(16,"Nilai Teknik"),l.Xb(),l.Yb(17,"th"),l.vc(18,"Nilai Atletik"),l.Xb(),l.Xb(),l.Xb(),l.Yb(19,"tbody"),l.tc(20,f,17,4,"tr",18),l.Xb(),l.Xb(),l.Xb(),l.Yb(21,"div",11),l.Ub(22,"hr"),l.Yb(23,"button",19),l.gc("click",(function(){return l.qc(t),l.ic().onSubmit()})),l.Ub(24,"i",20),l.vc(25," Simpan "),l.Xb(),l.Yb(26,"button",21),l.gc("click",(function(){return l.qc(t),l.ic().athleteReset()})),l.Ub(27,"i",22),l.vc(28," Reset "),l.Xb(),l.Xb(),l.Xb(),l.Xb(),l.Xb(),l.Xb(),l.Xb(),l.Ub(29,"div",8),l.Xb()}if(2&t){const t=l.ic();l.Hb(20),l.lc("ngForOf",t.Data)}}const v=a.a.mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:2e3}),g=s.f.forChild([{path:"",component:(()=>{class t{constructor(t,i,e){this.socket=t,this.atletService=i,this.pointService=e,this.isLoading=!1,this.userData={},this.optionValue=[],this.originalOptionValue=[],this.userPoint=[],this.cmpUserPoint=[],this.isFound=!1,this.Data=[{juri:"J-1"},{juri:"J-2"},{juri:"J-3"},{juri:"J-4"},{juri:"J-5"},{juri:"J-6"},{juri:"J-7"}],this.payload={matchId:0,athleteId:0,adminPointList:[]},this.socket.emit("result-admin"),this.socket.on("data-admin",()=>{this.atletService.getAtletByMatch().then(t=>{this.userData={},this.optionValue=[],this.originalOptionValue=[],this.userPoint=[],this.cmpUserPoint=[],this.userData=t.result[0],this.payload.matchId=this.userData.id_match,this.payload.athleteId=this.userData.id_atlet,this.pointService.getPointForScoreboard(this.userData.id_atlet,this.userData.id_match).then(t=>{if(this.userPoint=t.result.athlete_point_list||t.result||[],this.cmpUserPoint=[...this.userPoint],this.userPoint.length<1)for(let i=0;i<7;i++){this.optionValue.push({userId:i+1,data:[]});for(let t=5;t<10;t+=.2){let e=t.toFixed(1);this.optionValue[i].data.push({point:e})}}else{for(let t=0;t<7;t++){this.isFound=!1;for(let i in this.userPoint)this.userPoint[i].id_user-1===t&&(this.isFound=!0,this.optionValue.push({userId:this.userPoint[i].id_user,data:[],isFound:!0}));this.isFound||this.optionValue.push({userId:10*(t+1),data:[]});for(let i=5;i<10;i+=.2){let e=i.toFixed(1);this.optionValue[t].data.push({point:e})}}for(let t in this.optionValue)if(this.userPoint[t])for(let i in this.optionValue[t].data){let e=this.optionValue[t].data[i];this.userPoint[t].technical_result.toFixed(1)===e.point&&(this.optionValue[this.userPoint[t].id_user-1].data[i].selectedTechnical=!0,this.payload.adminPointList[this.userPoint[t].id_user-1].techValue=e.point,this.userPoint[t].athletic_result.toFixed(1)===e.point&&(this.optionValue[this.userPoint[t].id_user-1].data[i].selectedAthletic=!0,this.payload.adminPointList[this.userPoint[t].id_user-1].athValue=e.point)),this.userPoint[t].athletic_result.toFixed(1)===e.point&&(this.optionValue[this.userPoint[t].id_user-1].data[i].selectedAthletic=!0,this.payload.adminPointList[this.userPoint[t].id_user-1].athValue=e.point,this.userPoint[t].technical_result.toFixed(1)===e.point&&(this.optionValue[this.userPoint[t].id_user-1].data[i].selectedTechnical=!0,this.payload.adminPointList[this.userPoint[t].id_user-1].techValue=e.point))}}console.log(this.optionValue),this.isLoading=!1}).catch(t=>{if(console.log(t),404===t.status)for(let i=0;i<7;i++){this.optionValue.push({userId:i+1,data:[]});for(let t=5;t<10;t+=.2){let e=t.toFixed(1);this.optionValue[i].data.push({point:e})}}this.isLoading=!1})}).catch(t=>{if(404===t.status){console.log("notFound");for(let t=0;t<7;t++){this.optionValue.push({userId:t+1,data:[]});for(let i=5;i<10;i+=.2){let e=i.toFixed(1);this.optionValue[t].data.push({point:e})}}}console.log(t),this.isLoading=!1})}),this.socket.on("reset-data-admin",()=>{console.log("realtime reset"),this.userData={},this.optionValue=[],this.originalOptionValue=[],this.userPoint=[],this.cmpUserPoint=[];for(let t=0;t<7;t++){this.optionValue.push({userId:t+1,data:[]});for(let i=5;i<10;i+=.2){let e=i.toFixed(1);this.optionValue[t].data.push({point:e})}}})}ngOnInit(){for(let t=1;t<8;t++)this.payload.adminPointList.push({userId:t,techValue:0,athValue:0});this.isLoading=!0}_handleSelectPoint(t,i,e){"tech"===t?this.payload.adminPointList[i].techValue=e:this.payload.adminPointList[i].athValue=e}onSubmit(){this.pointService.doPointByAdmin(this.payload).then(t=>{this.socket.emit("result-admin"),this.socket.emit("scoreboard")}).catch(t=>{console.log(t)})}athleteReset(){if(this.userData){let t=0;for(let i in this.optionValue)for(let e in this.optionValue[i].data)this.optionValue[i].data[e].selectedTechnical&&t++;7===t?this.pointService.changeAthleteAssessment(this.userData.id_atlet).then(t=>{console.log(t),this.socket.emit("reset-admin")}).catch(t=>{if(console.log(t),404===t.status){console.log("== masuk gag 404"),this.userData={},this.optionValue=[],this.originalOptionValue=[],this.socket.emit("reset-scoreboard"),this.socket.emit("reset-admin"),this.socket.emit("reset-juri"),this.userPoint=[],this.cmpUserPoint=[],this.isLoading=!0;for(let t=0;t<7;t++){this.optionValue.push({userId:t+1,data:[]});for(let i=5;i<10;i+=.2){let e=i.toFixed(1);this.optionValue[t].data.push({point:e})}}}this.isLoading=!1,console.log(this.optionValue)}):v.fire({icon:"info",text:"Mohon lengkapi penilaian atlet terlebih dahulu"})}else v.fire({icon:"info",text:"Mohon lengkapi penilaian atlet terlebih dahulu"})}}return t.\u0275fac=function(i){return new(i||t)(l.Tb(c.a),l.Tb(h.a),l.Tb(r.a))},t.\u0275cmp=l.Nb({type:t,selectors:[["app-assessment-admin"]],decls:8,vars:2,consts:[[1,"header","pb-6",2,"background","url('assets/images/banner/banner6.jpg')","height","200px"],[1,"container-fluid"],[1,"header-body"],[1,"row","align-items-center","py-4"],[1,"text-center","text-light","mt-3",2,"margin","auto","font-size","40px"],["class","row","style","margin-top: -80px;",4,"ngIf"],["class","row",4,"ngIf"],[1,"row",2,"margin-top","-80px"],[1,"col"],[1,"col-lg-8","col-md-10"],[1,"row"],[1,"col-md-12"],[1,"card"],[1,"card-body"],[1,"text-center"],[1,"col-md-6"],[1,"table-responsive"],[1,"table","table-borderless"],[4,"ngFor","ngForOf"],[1,"btn","btn-outline-success","float-right",3,"click"],[1,"fa","fa-save"],[1,"btn","btn-danger",3,"click"],[1,"fa","fa-eraser"],[1,"form-group"],[1,"form-control",3,"change"]],template:function(t,i){1&t&&(l.Yb(0,"div",0),l.Yb(1,"div",1),l.Yb(2,"div",2),l.Yb(3,"div",3),l.Yb(4,"p",4),l.vc(5,"Penilaian Admin"),l.Xb(),l.Xb(),l.Xb(),l.Xb(),l.Xb(),l.tc(6,d,29,3,"div",5),l.tc(7,m,30,1,"div",6)),2&t&&(l.Hb(6),l.lc("ngIf",!i.isLoading),l.Hb(1),l.lc("ngIf",!i.isLoading))},directives:[o.j,o.i,u.i,u.l],styles:[""]}),t})()}]);var X=e("tk/3");let Y=(()=>{class t{}return t.\u0275mod=l.Rb({type:t}),t.\u0275inj=l.Qb({factory:function(i){return new(i||t)},imports:[[g,o.b,X.b,u.c,u.j]]}),t})()}}]);