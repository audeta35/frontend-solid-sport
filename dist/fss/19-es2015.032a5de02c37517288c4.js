(window.webpackJsonp=window.webpackJsonp||[]).push([[19],{QSqd:function(t,e,n){"use strict";n.r(e),n.d(e,"ImportAtletComponentModule",(function(){return Y}));var i=n("ofXK"),o=n("tyNb"),r=n("PSD3"),c=n.n(r);class b{}var a=n("fXoL"),l=n("LYy9"),s=n("3Pt+");const d=["csvReader"],u=function(){return{standalone:!0}};function g(t,e){if(1&t){const t=a.Zb();a.Yb(0,"div"),a.Yb(1,"span",38),a.Yb(2,"input",39),a.gc("ngModelChange",(function(e){return a.qc(t),a.ic().$implicit.group=e})),a.Xb(),a.Xb(),a.Xb()}if(2&t){const t=a.ic().$implicit;a.Hb(2),a.lc("ngModel",t.group)("ngModelOptions",a.mc(2,u))}}function p(t,e){if(1&t){const t=a.Zb();a.Yb(0,"span",40),a.Yb(1,"input",39),a.gc("ngModelChange",(function(e){return a.qc(t),a.ic().$implicit.group=e})),a.Xb(),a.Xb()}if(2&t){const t=a.ic().$implicit;a.Hb(1),a.lc("ngModel",t.group)("ngModelOptions",a.mc(2,u))}}function m(t,e){if(1&t){const t=a.Zb();a.Yb(0,"tr"),a.Yb(1,"th"),a.Yb(2,"button",26),a.gc("click",(function(){a.qc(t);const n=e.index;return a.ic(2).deleteForm(n)})),a.Ub(3,"i",27),a.Xb(),a.Xb(),a.Yb(4,"th"),a.vc(5),a.Xb(),a.Yb(6,"td"),a.Yb(7,"div",28),a.Yb(8,"input",29),a.gc("ngModelChange",(function(n){return a.qc(t),e.$implicit.name=n})),a.Xb(),a.Xb(),a.Xb(),a.Yb(9,"td"),a.Yb(10,"div",28),a.Yb(11,"input",30),a.gc("ngModelChange",(function(n){return a.qc(t),e.$implicit.kontingen=n})),a.Xb(),a.Xb(),a.Xb(),a.Yb(12,"td"),a.Yb(13,"div",28),a.Yb(14,"select",31),a.gc("ngModelChange",(function(n){return a.qc(t),e.$implicit.kata=n})),a.Yb(15,"option",32),a.vc(16,"INKAI"),a.Xb(),a.Yb(17,"option",33),a.vc(18,"UNSU"),a.Xb(),a.Xb(),a.Xb(),a.Xb(),a.Yb(19,"td"),a.tc(20,g,3,3,"div",34),a.tc(21,p,2,3,"ng-template",null,35,a.uc),a.Xb(),a.Yb(23,"td"),a.Yb(24,"div",28),a.Yb(25,"select",31),a.gc("ngModelChange",(function(n){return a.qc(t),e.$implicit.attribute=n})),a.Yb(26,"option",36),a.vc(27,"AKA "),a.Xb(),a.Yb(28,"option",37),a.vc(29,"AO "),a.Xb(),a.Xb(),a.Xb(),a.Xb(),a.Xb()}if(2&t){const t=e.index,n=e.$implicit,i=a.pc(22);a.Hb(5),a.xc(" ",t+1," "),a.Hb(3),a.lc("ngModel",n.name)("ngModelOptions",a.mc(11,u)),a.Hb(3),a.lc("ngModel",n.kontingen)("ngModelOptions",a.mc(12,u)),a.Hb(3),a.lc("ngModel",n.kata)("ngModelOptions",a.mc(13,u)),a.Hb(6),a.lc("ngIf","null"===n.group)("ngIfElse",i),a.Hb(5),a.lc("ngModel",n.attribute)("ngModelOptions",a.mc(14,u))}}function h(t,e){if(1&t){const t=a.Zb();a.Yb(0,"div",13),a.Yb(1,"div",18),a.Yb(2,"h1",19),a.vc(3," IMPOR DATA ATLET "),a.Xb(),a.Xb(),a.Yb(4,"div",14),a.Yb(5,"div",20),a.Yb(6,"table",21),a.Yb(7,"thead"),a.Yb(8,"tr"),a.Yb(9,"th"),a.vc(10," pilih "),a.Xb(),a.Yb(11,"th"),a.vc(12,"No"),a.Xb(),a.Yb(13,"th"),a.vc(14,"Nama Atlet"),a.Xb(),a.Yb(15,"th"),a.vc(16,"Kontingen"),a.Xb(),a.Yb(17,"th"),a.vc(18,"Kata yang dimainkan"),a.Xb(),a.Yb(19,"th"),a.vc(20,"Grup"),a.Xb(),a.Yb(21,"th"),a.vc(22,"Atribut"),a.Xb(),a.Xb(),a.Xb(),a.Yb(23,"tbody"),a.tc(24,m,30,15,"tr",22),a.Xb(),a.Xb(),a.Xb(),a.Yb(25,"div",23),a.Yb(26,"button",24),a.gc("click",(function(){return a.qc(t),a.ic().setForm()})),a.vc(27," Tambah Form "),a.Xb(),a.Yb(28,"button",25),a.gc("click",(function(){return a.qc(t),a.ic().submitForm()})),a.vc(29," Simpan Data "),a.Xb(),a.Xb(),a.Xb(),a.Xb()}if(2&t){const t=a.ic();a.Hb(24),a.lc("ngForOf",t.names)}}const f=c.a.mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:2e3}),v=o.f.forChild([{path:"",component:(()=>{class t{constructor(t,e){this.atletService=t,this.routes=e,this.names=[],this.isProcess=!1,this.group=[],this.maxUserGroup=10,this.records=[]}ngOnInit(){}uploadListener(t){if(this.isValidCSVFile(t.srcElement.files[0])){let e=t.target,n=new FileReader;n.readAsText(e.files[0]),n.onload=()=>{let t=n.result.split(/\r\n|\n/),e=this.getHeaderArray(t);this.records=this.getDataRecordsArrayFromCSVFile(t,e.length)},n.onerror=function(){console.log("error is occured while reading file!")}}else alert("Please import valid .csv file."),this.fileReset()}getDataRecordsArrayFromCSVFile(t,e){let n,i=Math.ceil(t.length/this.maxUserGroup);for(n=1;n<=i;n++)this.group.push({name:"group "+n});for(n=1;n<=t.length;n++){let i=t[n].split(",");if(i.length==e){let t=new b;t.name=i[0].trim(),t.kontingen=i[1].trim(),t.attribute=i[2].trim(),t.kata=i[3].trim(),t.group=i[4].trim(),this.names.push({name:t.name,kontingen:t.kontingen,kata:t.kata,attribute:t.attribute,selected:!1,group:"group "+t.group})}}return console.log(this.names),[]}isValidCSVFile(t){return t.name.endsWith(".csv")}getHeaderArray(t){let e=t[0].split(","),n=[];for(let i=0;i<e.length;i++)n.push(e[i]);return n}fileReset(){this.csvReader.nativeElement.value="",this.records=[]}addForm(){this.isProcess=!0,setTimeout(()=>{let t;for(t=1;t<=this.totalForm;t++)this.names.push({name:"",kontingen:"",kata:"",attribute:"",group:"null"});this.isProcess=!1},500)}setForm(){this.names.push({name:"",kontingen:"",kata:"",attribute:"",group:"null"})}deleteForm(t){this.names.splice(t,1)}numberOnly(t){const e=t.which?t.which:t.keyCode;return!(e>31&&(e<48||e>57))}submitForm(){this.atletService.addAtletGroup(this.names,this.group).then(t=>{console.log(t),f.fire({icon:"success",title:"Data Atlet berhasil di tambah"}),this.routes.navigate(["file-atlet"])}).catch(t=>{f.fire({icon:"error",title:"Kesalahan pada server"}),console.log(t)})}}return t.\u0275fac=function(e){return new(e||t)(a.Tb(l.a),a.Tb(o.b))},t.\u0275cmp=a.Nb({type:t,selectors:[["app-import-atlet"]],viewQuery:function(t,e){var n;1&t&&a.zc(d,!0),2&t&&a.oc(n=a.hc())&&(e.csvReader=n.first)},decls:26,vars:1,consts:[[1,"header","pb-6",2,"background","url('assets/images/banner/banner6.jpg')","height","200px"],[1,"container-fluid"],[1,"header-body"],[1,"row","align-items-center","py-4"],[1,"text-center","text-light","mt-3",2,"margin","auto","font-size","40px"],[1,"row",2,"margin-top","-100px"],[1,"col"],[1,"col-lg-11","col-md-11"],[1,"row"],[1,"col-md-12"],["routerLink","/file-atlet",1,"btn","btn-sm","btn-neutral","mb-4"],[1,"fa","fa-angle-left"],[1,"float-right","badge","badge-success"],[1,"card"],[1,"card-body"],["type","file","name","Upload CSV","id","txtFileUpload","accept",".csv",1,"btn","btn-block","btn-outline-success",3,"change"],["csvReader",""],["class","card",4,"ngIf"],[1,"card-header","bg-primary"],[1,"text-uppercase","text-center","text-white"],[1,"table-responsive"],[1,"table","table-borderless"],[4,"ngFor","ngForOf"],[1,"card-footer"],[1,"btn","btn-outline-primary",3,"click"],[1,"btn","float-right","btn-outline-success",3,"click"],[1,"btn","btn-sm","btn-outline-danger",3,"click"],[1,"fa","fa-trash"],[1,"form-group"],["placeholder","Nama Atlet","type","text",1,"form-control",3,"ngModel","ngModelOptions","ngModelChange"],["placeholder","Kontingen","type","text",1,"form-control",3,"ngModel","ngModelOptions","ngModelChange"],["placeholder","Nama Atlet",1,"form-control",3,"ngModel","ngModelOptions","ngModelChange"],["value","inkai"],["value","unsu"],[4,"ngIf","ngIfElse"],["grouping",""],["value","aka",2,"background-color","red","color","#fff"],["value","ao",2,"background-color","blue","color","#fff"],[1,"badge","badge-primary"],["placeholder","group","type","text",1,"form-control",3,"ngModel","ngModelOptions","ngModelChange"],[1,"badge","badge-success"]],template:function(t,e){1&t&&(a.Yb(0,"div",0),a.Yb(1,"div",1),a.Yb(2,"div",2),a.Yb(3,"div",3),a.Yb(4,"p",4),a.vc(5,"Import Data Atlet"),a.Xb(),a.Xb(),a.Xb(),a.Xb(),a.Xb(),a.Yb(6,"div",5),a.Ub(7,"div",6),a.Yb(8,"div",7),a.Yb(9,"div",8),a.Yb(10,"div",9),a.Yb(11,"a",10),a.Ub(12,"i",11),a.vc(13," Back"),a.Xb(),a.Yb(14,"span",12),a.vc(15,"import .csv"),a.Xb(),a.Yb(16,"div",13),a.Yb(17,"div",14),a.Yb(18,"div",8),a.Yb(19,"div",9),a.Yb(20,"input",15,16),a.gc("change",(function(t){return e.uploadListener(t)})),a.Xb(),a.Xb(),a.Xb(),a.Xb(),a.Xb(),a.Xb(),a.Xb(),a.Yb(22,"div",8),a.Yb(23,"div",9),a.tc(24,h,30,1,"div",17),a.Xb(),a.Xb(),a.Xb(),a.Ub(25,"div",6),a.Xb()),2&t&&(a.Hb(24),a.lc("ngIf",e.names.length))},directives:[o.e,i.j,i.i,s.b,s.e,s.h,s.k,s.i,s.l],styles:[""]}),t})()}]);var X=n("tk/3");let Y=(()=>{class t{}return t.\u0275mod=a.Rb({type:t}),t.\u0275inj=a.Qb({factory:function(e){return new(e||t)},imports:[[v,i.b,X.b,s.c,s.j]]}),t})()}}]);