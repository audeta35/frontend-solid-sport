function _toConsumableArray(t){return _arrayWithoutHoles(t)||_iterableToArray(t)||_unsupportedIterableToArray(t)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(t,e){if(t){if("string"==typeof t)return _arrayLikeToArray(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);return"Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?_arrayLikeToArray(t,e):void 0}}function _iterableToArray(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}function _arrayWithoutHoles(t){if(Array.isArray(t))return _arrayLikeToArray(t)}function _arrayLikeToArray(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,a=new Array(e);i<e;i++)a[i]=t[i];return a}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}function _createClass(t,e,i){return e&&_defineProperties(t.prototype,e),i&&_defineProperties(t,i),t}(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{w4Pu:function(t,e,i){"use strict";i.r(e),i.d(e,"AssessmentAdminComponentModule",(function(){return P}));var a=i("ofXK"),o=i("tyNb"),n=i("PSD3"),r=i.n(n),s=i("fXoL"),c=i("7JkF"),l=i("LYy9"),u=i("PLSI"),d=i("3Pt+");function b(t,e){if(1&t&&(s.Yb(0,"div",7),s.Ub(1,"div",8),s.Yb(2,"div",9),s.Yb(3,"div",10),s.Yb(4,"div",11),s.Yb(5,"div",12),s.Yb(6,"div",13),s.Yb(7,"div",10),s.Yb(8,"div",11),s.Yb(9,"div",14),s.Yb(10,"label"),s.vc(11,"Nama Atlet "),s.Xb(),s.Yb(12,"h1"),s.vc(13),s.Xb(),s.Xb(),s.Xb(),s.Xb(),s.Ub(14,"hr"),s.Yb(15,"div",10),s.Yb(16,"div",15),s.Yb(17,"div",14),s.Yb(18,"label"),s.vc(19,"Memainkan kata "),s.Xb(),s.Yb(20,"h2"),s.vc(21),s.Xb(),s.Xb(),s.Xb(),s.Yb(22,"div",15),s.Yb(23,"div",14),s.Yb(24,"label"),s.vc(25,"Kontingen "),s.Xb(),s.Yb(26,"h2"),s.vc(27),s.Xb(),s.Xb(),s.Xb(),s.Xb(),s.Xb(),s.Xb(),s.Xb(),s.Xb(),s.Xb(),s.Ub(28,"div",8),s.Xb()),2&t){var i=s.ic();s.Hb(13),s.xc(" ",i.userData.atlet_name,""),s.Hb(8),s.xc(" ",i.userData.kata_name,""),s.Hb(6),s.wc(i.userData.kontingen)}}function p(t,e){if(1&t&&(s.Yb(0,"option"),s.vc(1),s.Xb()),2&t){var i=e.$implicit,a=s.ic().index,o=s.ic(2);s.Ib("selected",!(a+1!=o.optionValue[a].userId||!i.selectedTechnical)||null),s.Hb(1),s.xc("",i.point," ")}}function h(t,e){if(1&t&&(s.Yb(0,"option"),s.vc(1),s.Xb()),2&t){var i=e.$implicit,a=s.ic().index,o=s.ic(2);s.Ib("selected",!(a+1!==o.optionValue[a].userId||!i.selectedAthletic)||null),s.Hb(1),s.xc("",i.point," ")}}function f(t,e){if(1&t){var i=s.Zb();s.Yb(0,"tr"),s.Yb(1,"th"),s.vc(2),s.Xb(),s.Yb(3,"th"),s.vc(4),s.Xb(),s.Yb(5,"td"),s.Yb(6,"div",23),s.Yb(7,"select",24),s.gc("change",(function(t){s.qc(i);var a=e.index;return s.ic(2)._handleSelectPoint("tech",a,t.target.value)})),s.Yb(8,"option"),s.vc(9,"0"),s.Xb(),s.tc(10,p,2,2,"option",18),s.Xb(),s.Xb(),s.Xb(),s.Yb(11,"td"),s.Yb(12,"div",23),s.Yb(13,"select",24),s.gc("change",(function(t){s.qc(i);var a=e.index;return s.ic(2)._handleSelectPoint("ath",a,t.target.value)})),s.Yb(14,"option"),s.vc(15,"0"),s.Xb(),s.tc(16,h,2,2,"option",18),s.Xb(),s.Xb(),s.Xb(),s.Xb()}if(2&t){var a=e.index,o=e.$implicit,n=s.ic(2);s.Hb(2),s.wc(a+1),s.Hb(2),s.wc(o.juri),s.Hb(6),s.lc("ngForOf",n.optionValue[a].data),s.Hb(6),s.lc("ngForOf",n.optionValue[a].data)}}function v(t,e){if(1&t){var i=s.Zb();s.Yb(0,"div",10),s.Ub(1,"div",8),s.Yb(2,"div",9),s.Yb(3,"div",10),s.Yb(4,"div",11),s.Yb(5,"div",12),s.Yb(6,"div",13),s.Yb(7,"div",16),s.Yb(8,"table",17),s.Yb(9,"thead"),s.Yb(10,"tr"),s.Yb(11,"th"),s.vc(12,"No"),s.Xb(),s.Yb(13,"th"),s.vc(14,"Juri"),s.Xb(),s.Yb(15,"th"),s.vc(16,"Nilai Teknik"),s.Xb(),s.Yb(17,"th"),s.vc(18,"Nilai Atletik"),s.Xb(),s.Xb(),s.Xb(),s.Yb(19,"tbody"),s.tc(20,f,17,4,"tr",18),s.Xb(),s.Xb(),s.Xb(),s.Yb(21,"div",11),s.Ub(22,"hr"),s.Yb(23,"button",19),s.gc("click",(function(){return s.qc(i),s.ic().onSubmit()})),s.Ub(24,"i",20),s.vc(25," Simpan "),s.Xb(),s.Yb(26,"button",21),s.gc("click",(function(){return s.qc(i),s.ic().athleteReset()})),s.Ub(27,"i",22),s.vc(28," Reset "),s.Xb(),s.Xb(),s.Xb(),s.Xb(),s.Xb(),s.Xb(),s.Xb(),s.Ub(29,"div",8),s.Xb()}if(2&t){var a=s.ic();s.Hb(20),s.lc("ngForOf",a.Data)}}var m,g,y=r.a.mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:2e3}),X=o.f.forChild([{path:"",component:(m=function(){function t(e,i,a){var o=this;_classCallCheck(this,t),this.socket=e,this.atletService=i,this.pointService=a,this.isLoading=!1,this.userData={},this.optionValue=[],this.originalOptionValue=[],this.userPoint=[],this.cmpUserPoint=[],this.isFound=!1,this.Data=[{juri:"J-1"},{juri:"J-2"},{juri:"J-3"},{juri:"J-4"},{juri:"J-5"},{juri:"J-6"},{juri:"J-7"}],this.payload={matchId:0,athleteId:0,adminPointList:[]},this.socket.emit("result-admin"),this.socket.on("data-admin",(function(){o.atletService.getAtletByMatch().then((function(t){o.userData={},o.optionValue=[],o.originalOptionValue=[],o.userPoint=[],o.cmpUserPoint=[],o.userData=t.result[0],o.payload.matchId=o.userData.id_match,o.payload.athleteId=o.userData.id_atlet,o.pointService.getPointForScoreboard(o.userData.id_atlet,o.userData.id_match).then((function(t){if(o.userPoint=t.result.athlete_point_list||t.result||[],o.cmpUserPoint=_toConsumableArray(o.userPoint),o.userPoint.length<1)for(var e=0;e<7;e++){o.optionValue.push({userId:e+1,data:[]});for(var i=5;i<10;i+=.2){var a=i.toFixed(1);o.optionValue[e].data.push({point:a})}}else{for(var n=0;n<7;n++){for(var r in o.isFound=!1,o.userPoint)o.userPoint[r].id_user-1===n&&(o.isFound=!0,o.optionValue.push({userId:o.userPoint[r].id_user,data:[],isFound:!0}));o.isFound||o.optionValue.push({userId:10*(n+1),data:[]});for(var s=5;s<10;s+=.2){var c=s.toFixed(1);o.optionValue[n].data.push({point:c})}}for(var l in o.optionValue)if(o.userPoint[l])for(var u in o.optionValue[l].data){var d=o.optionValue[l].data[u];o.userPoint[l].technical_result.toFixed(1)===d.point&&(o.optionValue[o.userPoint[l].id_user-1].data[u].selectedTechnical=!0,o.payload.adminPointList[o.userPoint[l].id_user-1].techValue=d.point,o.userPoint[l].athletic_result.toFixed(1)===d.point&&(o.optionValue[o.userPoint[l].id_user-1].data[u].selectedAthletic=!0,o.payload.adminPointList[o.userPoint[l].id_user-1].athValue=d.point)),o.userPoint[l].athletic_result.toFixed(1)===d.point&&(o.optionValue[o.userPoint[l].id_user-1].data[u].selectedAthletic=!0,o.payload.adminPointList[o.userPoint[l].id_user-1].athValue=d.point,o.userPoint[l].technical_result.toFixed(1)===d.point&&(o.optionValue[o.userPoint[l].id_user-1].data[u].selectedTechnical=!0,o.payload.adminPointList[o.userPoint[l].id_user-1].techValue=d.point))}}console.log(o.optionValue),o.isLoading=!1})).catch((function(t){if(console.log(t),404===t.status)for(var e=0;e<7;e++){o.optionValue.push({userId:e+1,data:[]});for(var i=5;i<10;i+=.2){var a=i.toFixed(1);o.optionValue[e].data.push({point:a})}}o.isLoading=!1}))})).catch((function(t){if(404===t.status){console.log("notFound");for(var e=0;e<7;e++){o.optionValue.push({userId:e+1,data:[]});for(var i=5;i<10;i+=.2){var a=i.toFixed(1);o.optionValue[e].data.push({point:a})}}}console.log(t),o.isLoading=!1}))})),this.socket.on("reset-data-admin",(function(){console.log("realtime reset"),o.userData={},o.optionValue=[],o.originalOptionValue=[],o.userPoint=[],o.cmpUserPoint=[];for(var t=0;t<7;t++){o.optionValue.push({userId:t+1,data:[]});for(var e=5;e<10;e+=.2){var i=e.toFixed(1);o.optionValue[t].data.push({point:i})}}}))}return _createClass(t,[{key:"ngOnInit",value:function(){for(var t=1;t<8;t++)this.payload.adminPointList.push({userId:t,techValue:0,athValue:0});this.isLoading=!0}},{key:"_handleSelectPoint",value:function(t,e,i){"tech"===t?this.payload.adminPointList[e].techValue=i:this.payload.adminPointList[e].athValue=i}},{key:"onSubmit",value:function(){var t=this;this.pointService.doPointByAdmin(this.payload).then((function(e){t.socket.emit("result-admin"),t.socket.emit("scoreboard")})).catch((function(t){console.log(t)}))}},{key:"athleteReset",value:function(){var t=this;if(this.userData){var e=0;for(var i in this.optionValue)for(var a in this.optionValue[i].data)this.optionValue[i].data[a].selectedTechnical&&e++;7===e?this.pointService.changeAthleteAssessment(this.userData.id_atlet).then((function(e){console.log(e),t.socket.emit("reset-admin")})).catch((function(e){if(console.log(e),404===e.status){console.log("== masuk gag 404"),t.userData={},t.optionValue=[],t.originalOptionValue=[],t.socket.emit("reset-scoreboard"),t.socket.emit("reset-admin"),t.socket.emit("reset-juri"),t.userPoint=[],t.cmpUserPoint=[],t.isLoading=!0;for(var i=0;i<7;i++){t.optionValue.push({userId:i+1,data:[]});for(var a=5;a<10;a+=.2){var o=a.toFixed(1);t.optionValue[i].data.push({point:o})}}}t.isLoading=!1,console.log(t.optionValue)})):y.fire({icon:"info",text:"Mohon lengkapi penilaian atlet terlebih dahulu"})}else y.fire({icon:"info",text:"Mohon lengkapi penilaian atlet terlebih dahulu"})}}]),t}(),m.\u0275fac=function(t){return new(t||m)(s.Tb(c.a),s.Tb(l.a),s.Tb(u.a))},m.\u0275cmp=s.Nb({type:m,selectors:[["app-assessment-admin"]],decls:8,vars:2,consts:[[1,"header","pb-6",2,"background","url('assets/images/banner/banner6.jpg')","height","200px"],[1,"container-fluid"],[1,"header-body"],[1,"row","align-items-center","py-4"],[1,"text-center","text-light","mt-3",2,"margin","auto","font-size","40px"],["class","row","style","margin-top: -80px;",4,"ngIf"],["class","row",4,"ngIf"],[1,"row",2,"margin-top","-80px"],[1,"col"],[1,"col-lg-8","col-md-10"],[1,"row"],[1,"col-md-12"],[1,"card"],[1,"card-body"],[1,"text-center"],[1,"col-md-6"],[1,"table-responsive"],[1,"table","table-borderless"],[4,"ngFor","ngForOf"],[1,"btn","btn-outline-success","float-right",3,"click"],[1,"fa","fa-save"],[1,"btn","btn-danger",3,"click"],[1,"fa","fa-eraser"],[1,"form-group"],[1,"form-control",3,"change"]],template:function(t,e){1&t&&(s.Yb(0,"div",0),s.Yb(1,"div",1),s.Yb(2,"div",2),s.Yb(3,"div",3),s.Yb(4,"p",4),s.vc(5,"Penilaian Admin"),s.Xb(),s.Xb(),s.Xb(),s.Xb(),s.Xb(),s.tc(6,b,29,3,"div",5),s.tc(7,v,30,1,"div",6)),2&t&&(s.Hb(6),s.lc("ngIf",!e.isLoading),s.Hb(1),s.lc("ngIf",!e.isLoading))},directives:[a.j,a.i,d.i,d.l],styles:[""]}),m)}]),Y=i("tk/3"),P=((g=function t(){_classCallCheck(this,t)}).\u0275mod=s.Rb({type:g}),g.\u0275inj=s.Qb({factory:function(t){return new(t||g)},imports:[[X,a.b,Y.b,d.c,d.j]]}),g)}}]);